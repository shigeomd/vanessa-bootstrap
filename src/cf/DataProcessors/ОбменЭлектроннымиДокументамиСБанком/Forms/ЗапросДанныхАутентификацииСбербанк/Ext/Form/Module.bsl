
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Если ЗначениеЗаполнено(ЭлектронныеДокументыСлужебныйКлиент.ЗначениеИзКэша("НомерКонтейнера")) Тогда
		СессияЗавершена = Ложь;
		ЭлектронныеДокументыСлужебныйКлиент.ЗавершитьСессиюНаТокене(СессияЗавершена);
		Если НЕ СессияЗавершена Тогда
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

&НаКлиенте
Процедура ОК(Команда)
	
	Если НЕ ПроверитьЗаполнение() Тогда
		Возврат;
	КонецЕсли;
	
	НомерКонтейнера = Число(Сред(УчетнаяЗапись, 4, 1));
	
	ЭлектронныеДокументыСлужебныйКлиент.ЗакэшироватьПараметрСбербанка("НомерКонтейнера", НомерКонтейнера);
	ЭлектронныеДокументыСлужебныйКлиент.ЗакэшироватьПараметрСбербанка("ПинКод", ПинКод);
	ЭлектронныеДокументыСлужебныйКлиент.ЗакэшироватьПараметрСбербанка("ТекущееСоглашениеЭД", Параметры.СоглашениеЭД);

	Закрыть(Параметры.СоглашениеЭД);
	
КонецПроцедуры

&НаКлиенте
Процедура Отмена(Команда)
	
	Закрыть(Неопределено);
	
КонецПроцедуры
